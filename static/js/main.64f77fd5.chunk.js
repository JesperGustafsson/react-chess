(this["webpackJsonpreact-chess"]=this["webpackJsonpreact-chess"]||[]).push([[0],{14:function(t,e,s){"use strict";s.r(e);var a=s(0),c=s(5),n=s.n(c),i=s(8),o=s.n(i),r=(s(6),s(1)),l=s(2),h=s(4),u=s(3);function p(t){return Object(a.jsx)("button",{className:"square "+t.shade,onClick:t.onClick,style:t.image,children:Object(a.jsxs)("div",{className:"hp-atk",children:[Object(a.jsx)("span",{className:"hp",children:t.hp&&t.hp}),Object(a.jsx)("span",{className:"atk",children:t.hp&&t.atk})]})})}var d=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(){return Object(r.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"renderSquare",value:function(t,e,s){var c=this,n=[t,e];return Object(a.jsx)(p,{image:this.props.squares[t][e]?this.props.squares[t][e].image:null,shade:s,hp:this.props.squares[t][e]?this.props.squares[t][e].hp:null,atk:this.props.squares[t][e]?this.props.squares[t][e].atk:null,onClick:function(){return c.props.onClick(n)}})}},{key:"render",value:function(){console.log("BOARD UPDATE");for(var t=[],e=0;e<this.props.squares.length;e++){for(var s=[],c=0;c<this.props.squares[e].length;c++){var n=b(e)===b(c)?"light-square":"dark-square";s.push(this.renderSquare(e,c,n))}t.push(Object(a.jsx)("div",{className:"board-row",children:s}))}return Object(a.jsx)("div",{children:t})}}]),s}(n.a.Component);function b(t){return t%2===0}var g=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(){return Object(r.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"renderSquare",value:function(t,e,s){return Object(a.jsx)(p,{keyVal:e,piece:t,style:t.image},e)}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"board-row",children:this.props.whiteFallenSoldiers.map((function(e,s){return t.renderSquare(e,s)}))}),Object(a.jsx)("div",{className:"board-row",children:this.props.blackFallenSoldiers.map((function(e,s){return t.renderSquare(e,s)}))})]})}}]),s}(n.a.Component),k=function(){function t(e,s){Object(r.a)(this,t),this.player=e,this.image={backgroundImage:"url('"+s+"')"},this.hp=3,this.atk=2}return Object(l.a)(t,[{key:"step",value:function(t,e,s,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=s+t*c,i=a+e*c;return console.log("destX: ".concat(n,", destY: ").concat(i)),[n,i]}}]),t}(),v=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){return Object(r.a)(this,s),e.call(this,t,1===t?"https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg":"https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg")}return Object(l.a)(s,[{key:"isMoveLegal",value:function(t,e,s){var a=t[0],c=t[1],n=e[0],i=e[1],o=i>c?1:i<c?-1:0,r=n>a?1:n<a?-1:0,l=c,h=a,u=this.step(o,r,l,h,1);if(l=u[0],h=u[1],console.log("srcX: ".concat(c,", srcY: ").concat(a,", destX: ").concat(i,", destY: ").concat(n)),Math.abs(i-c)===Math.abs(n-a)){for(;l!==i||h!==n;){if(console.log("nextX: ".concat(l,", nextY: ").concat(h)),null!=s[h][l])return console.log("STEP FAIL"),!1;console.log("STEP OK");var p=this.step(o,r,l,h,1);l=p[0],h=p[1]}return!0}return!1}}]),s}(k),j=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t,1===t?"https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg":"https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg")).hp=12,a.isKing=!0,a}return Object(l.a)(s,[{key:"isMoveLegal",value:function(t,e){var s=t[0],a=t[1],c=e[0],n=e[1];return console.log("srcX: ".concat(a,", srcY: ").concat(s,", destX: ").concat(n,", destY: ").concat(c)),Math.abs(c-s)<=1&&Math.abs(n-a)<=1}}]),s}(k),m=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){return Object(r.a)(this,s),e.call(this,t,1===t?"https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg":"https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg")}return Object(l.a)(s,[{key:"isMoveLegal",value:function(t,e){var s=t[0],a=t[1],c=e[0],n=e[1];return 2===Math.abs(c-s)&&1===Math.abs(n-a)||2===Math.abs(n-a)&&1===Math.abs(c-s)}}]),s}(k),f=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t,1===t?"https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg":"https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg")).initialPositions={1:[48,49,50,51,52,53,54,55],2:[8,9,10,11,12,13,14,15]},a}return Object(l.a)(s,[{key:"isMoveLegal",value:function(t,e){var s=t[0],a=t[1],c=e[0],n=e[1];return console.log("srcX: ".concat(a,", srcY: ").concat(s,", destX: ").concat(n,", destY: ").concat(c)),c==s- -1*this.player*1}}]),s}(k),O=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t,1===t?"https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg":"https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg")).atk=5,a.hp=10,a}return Object(l.a)(s,[{key:"isMoveLegal",value:function(t,e,s){var a=e[0],c=e[1],n=t[0],i=t[1];if(console.log("srcX: ".concat(n,", srcY: ").concat(i,", destX: ").concat(a,", destY: ").concat(c)),n!==a&&i!==c&&Math.abs(a-n)!==Math.abs(c-i))return!1;var o=a>n?1:a<n?-1:0,r=c>i?1:c<i?-1:0,l=n,h=i,u=this.step(o,r,l,h,1);for(l=u[0],h=u[1];l!==a||h!==c;){if(null!=s[l][h])return!1;var p=this.step(o,r,l,h,1);l=p[0],h=p[1]}return!0}}]),s}(k),w=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){return Object(r.a)(this,s),e.call(this,t,1===t?"https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg":"https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg")}return Object(l.a)(s,[{key:"isMoveLegal",value:function(t,e,s){var a=t[0],c=t[1],n=e[0],i=e[1],o=i>c?1:i<c?-1:0,r=n>a?1:n<a?-1:0,l=c,h=a,u=this.step(o,r,l,h,1);if(l=u[0],h=u[1],console.log("srcX: ".concat(c,", srcY: ").concat(a,", destX: ").concat(i,", destY: ").concat(n)),c===i||a===n){for(;l!==i||h!==n;){if(console.log("nextX: ".concat(l,", nextY: ").concat(h)),null!=s[h][l])return console.log("STEP FAIL"),!1;console.log("STEP OK");var p=this.step(o,r,l,h,1);l=p[0],h=p[1]}return!0}return!1}},{key:"isMovePossible",value:function(t,e){var s=t%8,a=8-s;return Math.abs(t-e)%8===0||e>=t-s&&e<t+a}}]),s}(k),P=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(t){return Object(r.a)(this,s),e.call(this,t,"http://t3.gstatic.com/images?q=tbn:ANd9GcReN9KWqKEGl0uRkdBWgcl-LaLK_8ecIzuBAhVBx9H82E40amLbEMYrZTc5fsgf4jxEpbAJaaV5znMbXHevmM0")}return s}((function t(e,s){Object(r.a)(this,t),this.image={backgroundImage:"url("+s+")"},this.player=e}));function S(){for(var t="----------- -RKBQ-XBKR- -PPPP-PPPP- --##------- --#----#--- ----------- -#---##---# -pppp-pppp- -rkbq-xbkr- -----------".split(" "),e=new Array(t.length),s=0;s<e.length;s++){var a=new Array(t[s]).fill(null);e[s]=a;for(var c=t[s].split(""),n=0;n<c.length;n++){switch(c[n]){case"#":e[s][n]=new P(2);break;case"r":e[s][n]=new w(-1);break;case"R":e[s][n]=new w(1);break;case"b":e[s][n]=new v(-1);break;case"B":e[s][n]=new v(1);break;case"k":e[s][n]=new m(-1);break;case"K":e[s][n]=new m(1);break;case"q":e[s][n]=new O(-1);break;case"Q":e[s][n]=new O(1);break;case"x":e[s][n]=new j(-1);break;case"X":e[s][n]=new j(1);break;case"p":e[s][n]=new f(-1);break;case"P":e[s][n]=new f(1);break;default:e[s][n]=null}}}return console.log(e),e}var y=function(t){Object(h.a)(s,t);var e=Object(u.a)(s);function s(){var t;return Object(r.a)(this,s),(t=e.call(this)).state={squares:S(),whiteFallenSoldiers:[],blackFallenSoldiers:[],player:1,attackingPiece:-1,defendingPiece:-1,PHASE:"PICKING",status:"",turn:"white",gameOver:!1},t}return Object(l.a)(s,[{key:"handleClick",value:function(t){var e=t[0],s=t[1];console.log("CLICK... PHASE: ".concat(this.state.PHASE));var a=this.state.squares;if("PICKING"===this.state.PHASE)a[e][s]&&a[e][s].player===this.state.player?this.setState({status:"Select Destination",attackingPiece:t,PHASE:"ATTACKING"}):this.setState({status:"Wrong Selection, pick your own piece"});else if("ATTACKING"===this.state.PHASE){var c=a[this.state.attackingPiece[0]][this.state.attackingPiece[1]].isMoveLegal(this.state.attackingPiece,t,a);if(a[e][s]&&a[e][s].player&&a[e][s].player==this.state.player)console.log("Invalid click: Self"),this.setState({status:"You cannot move to your own piece, choose another piece",PHASE:"PICKING"},(function(){console.log(this.state.PHASE)}));else if(a[e][s]&&a[e][s].player&&2==a[e][s].player)console.log("Invalid click: Obstacle"),this.setState({status:"Your ".concat(this.state.attackingPiece.constructor.name," cannot move there, choose another piece"),PHASE:"PICKING"},(function(){console.log(this.state.PHASE)}));else if(c)if(null==a[e][s])a[e][s]=a[this.state.attackingPiece[0]][this.state.attackingPiece[1]],a[this.state.attackingPiece[0]][this.state.attackingPiece[1]]=null,this.setState({status:"".concat("white"===this.state.turn?"Black's":"White's"," turn to move"),PHASE:"PICKING",player:-1*this.state.player,turn:"white"===this.state.turn?"black":"white"},(function(){console.log(this.state.PHASE)}));else if(a[e][s].player&&a[e][s].player==-1*this.state.player){var n=a[e][s];console.log("ATTACKED OBJECT: ".concat(n.constructor)),console.log("isKing?: ".concat(n.isKing));var i=a[this.state.attackingPiece[0]][this.state.attackingPiece[1]];n.hp-=i.atk,this.setState({status:"".concat("white"===this.state.turn?"Black's":"White's"," turn to move"),PHASE:"PICKING",player:-1*this.state.player,turn:"white"===this.state.turn?"black":"white"},(function(){console.log(this.state.PHASE)})),(!n.hp||n.hp<0)&&(n.isKing&&(console.log("It's Game Over, bitch.1"),this.setState({status:"Game over. ".concat("white"===this.state.turn?"Black":"White"," has won the game."),PHASE:"GAMEOVER"},(function(){console.log("It's Game Over, bitch.2"),console.log("It's Game Over, bitch.3 ".concat(this.state.PHASE))}))),a[e][s]=a[this.state.attackingPiece[0]][this.state.attackingPiece[1]],a[this.state.attackingPiece[0]][this.state.attackingPiece[1]]=null)}else console.log("Unknown Click");else console.log("Your ".concat(this.state.attackingPiece.constructor.name," cannot move there, choose another piece")),this.setState({status:"Your ".concat(this.state.attackingPiece.constructor.name," cannot move there, choose another piece"),PHASE:"PICKING"},(function(){console.log(this.state.PHASE)}))}else console.log("GAME OVER!!!++ ".concat(this.state.PHASE)),this.setState({status:"Player ".concat(this.state.turn," wins")});console.log("END OF PHASE : ".concat(this.state.PHASE))}},{key:"render",value:function(){var t=this;return console.log("GAME UPDATE"),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"game",children:[Object(a.jsx)("div",{className:"game-board",children:Object(a.jsx)(d,{squares:this.state.squares,onClick:function(e){return t.handleClick(e)}})}),Object(a.jsxs)("div",{className:"game-info",children:[Object(a.jsx)("h3",{children:"Turn"}),Object(a.jsx)("div",{id:"player-turn-box",style:{backgroundColor:this.state.turn}}),Object(a.jsx)("div",{className:"game-status",children:this.state.status}),Object(a.jsx)("div",{className:"fallen-soldier-block",children:Object(a.jsx)(g,{whiteFallenSoldiers:this.state.whiteFallenSoldiers,blackFallenSoldiers:this.state.blackFallenSoldiers})})]})]}),Object(a.jsx)("div",{className:"icons-attribution",children:Object(a.jsxs)("div",{children:[" ",Object(a.jsxs)("small",{children:[" Chess Icons And Favicon (extracted) By en:User:Cburnett [",Object(a.jsx)("a",{href:"http://www.gnu.org/copyleft/fdl.html",children:"GFDL"}),", ",Object(a.jsx)("a",{href:"http://creativecommons.org/licenses/by-sa/3.0/",children:"CC-BY-SA-3.0"}),", ",Object(a.jsx)("a",{href:"http://opensource.org/licenses/bsd-license.php",children:"BSD"})," or ",Object(a.jsx)("a",{href:"http://www.gnu.org/licenses/gpl.html",children:"GPL"}),"], ",Object(a.jsx)("a",{href:"https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces",children:"via Wikimedia Commons"})," "]})]})})]})}}]),s}(n.a.Component);o.a.render(Object(a.jsx)(y,{}),document.getElementById("root"))},6:function(t,e,s){}},[[14,1,2]]]);
//# sourceMappingURL=main.64f77fd5.chunk.js.map