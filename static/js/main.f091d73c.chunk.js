(this["webpackJsonpreact-chess"]=this["webpackJsonpreact-chess"]||[]).push([[0],{14:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(5),n=a.n(c),i=a(8),r=a.n(i),o=(a(6),a(1)),l=a(2),h=a(4),u=a(3);function p(e){return Object(s.jsx)("button",{className:"square "+e.shade,onClick:e.onClick,style:e.image,children:Object(s.jsxs)("div",{className:"hp-atk",children:[Object(s.jsx)("span",{className:"hp",children:e.hp&&e.hp}),Object(s.jsx)("span",{className:"atk",children:e.hp&&e.atk})]})})}var d=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderSquare",value:function(e,t,a){var c=this,n=[e,t];return Object(s.jsx)(p,{image:this.props.squares[e][t]?this.props.squares[e][t].image:null,shade:a,hp:this.props.squares[e][t]?this.props.squares[e][t].hp:null,atk:this.props.squares[e][t]?this.props.squares[e][t].atk:null,onClick:function(){return c.props.onClick(n)}})}},{key:"render",value:function(){console.log("BOARD UPDATE");for(var e=[],t=0;t<this.props.squares.length;t++){for(var a=[],c=0;c<this.props.squares[t].length;c++){var n=b(t)===b(c)?"light-square":"dark-square";a.push(this.renderSquare(t,c,n))}e.push(Object(s.jsx)("div",{className:"board-row",children:a}))}return Object(s.jsx)("div",{children:e})}}]),a}(n.a.Component);function b(e){return e%2===0}var k=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderSquare",value:function(e,t,a){return Object(s.jsx)(p,{keyVal:t,piece:e,style:e.image},t)}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"board-row",children:this.props.whiteFallenSoldiers.map((function(t,a){return e.renderSquare(t,a)}))}),Object(s.jsx)("div",{className:"board-row",children:this.props.blackFallenSoldiers.map((function(t,a){return e.renderSquare(t,a)}))})]})}}]),a}(n.a.Component),g=function(){function e(t,a){Object(o.a)(this,e),this.player=t,this.image={backgroundImage:"url('"+a+"')"},this.hp=3,this.atk=2}return Object(l.a)(e,[{key:"step",value:function(e,t,a,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=a+e*c,i=s+t*c;return console.log("destX: ".concat(n,", destY: ").concat(i)),[n,i]}}]),e}(),j=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e,1===e?"https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg":"https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg")}return Object(l.a)(a,[{key:"isMoveLegal",value:function(e,t,a){var s=e[0],c=e[1],n=t[0],i=t[1],r=i>c?1:i<c?-1:0,o=n>s?1:n<s?-1:0,l=c,h=s,u=this.step(r,o,l,h,1);if(l=u[0],h=u[1],console.log("srcX: ".concat(c,", srcY: ").concat(s,", destX: ").concat(i,", destY: ").concat(n)),Math.abs(i-c)===Math.abs(n-s)){for(;l!==i||h!==n;){if(console.log("nextX: ".concat(l,", nextY: ").concat(h)),null!=a[h][l])return console.log("STEP FAIL"),!1;console.log("STEP OK");var p=this.step(r,o,l,h,1);l=p[0],h=p[1]}return!0}return!1}}]),a}(g),v=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e,1===e?"https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg":"https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg")).hp=12,s}return Object(l.a)(a,[{key:"isMoveLegal",value:function(e,t){var a=e[0],s=e[1],c=t[0],n=t[1];return console.log("srcX: ".concat(s,", srcY: ").concat(a,", destX: ").concat(n,", destY: ").concat(c)),Math.abs(c-a)<=1&&Math.abs(n-s)<=1}}]),a}(g),m=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e,1===e?"https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg":"https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg")}return Object(l.a)(a,[{key:"isMoveLegal",value:function(e,t){var a=e[0],s=e[1],c=t[0],n=t[1];return 2===Math.abs(c-a)&&1===Math.abs(n-s)||2===Math.abs(n-s)&&1===Math.abs(c-a)}}]),a}(g),f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e,1===e?"https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg":"https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg")).initialPositions={1:[48,49,50,51,52,53,54,55],2:[8,9,10,11,12,13,14,15]},s}return Object(l.a)(a,[{key:"isMoveLegal",value:function(e,t){var a=e[0],s=e[1],c=t[0],n=t[1];return console.log("srcX: ".concat(s,", srcY: ").concat(a,", destX: ").concat(n,", destY: ").concat(c)),c==a- -1*this.player*1}}]),a}(g),O=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e,1===e?"https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg":"https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg")).atk=5,s.hp=10,s}return Object(l.a)(a,[{key:"isMoveLegal",value:function(e,t,a){var s=t[0],c=t[1],n=e[0],i=e[1];if(console.log("srcX: ".concat(n,", srcY: ").concat(i,", destX: ").concat(s,", destY: ").concat(c)),n!==s&&i!==c&&Math.abs(s-n)!==Math.abs(c-i))return!1;var r=s>n?1:s<n?-1:0,o=c>i?1:c<i?-1:0,l=n,h=i,u=this.step(r,o,l,h,1);for(l=u[0],h=u[1];l!==s||h!==c;){if(null!=a[l][h])return!1;var p=this.step(r,o,l,h,1);l=p[0],h=p[1]}return!0}}]),a}(g),w=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e,1===e?"https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg":"https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg")}return Object(l.a)(a,[{key:"isMoveLegal",value:function(e,t,a){var s=e[0],c=e[1],n=t[0],i=t[1],r=i>c?1:i<c?-1:0,o=n>s?1:n<s?-1:0,l=c,h=s,u=this.step(r,o,l,h,1);if(l=u[0],h=u[1],console.log("srcX: ".concat(c,", srcY: ").concat(s,", destX: ").concat(i,", destY: ").concat(n)),c===i||s===n){for(;l!==i||h!==n;){if(console.log("nextX: ".concat(l,", nextY: ").concat(h)),null!=a[h][l])return console.log("STEP FAIL"),!1;console.log("STEP OK");var p=this.step(r,o,l,h,1);l=p[0],h=p[1]}return!0}return!1}},{key:"isMovePossible",value:function(e,t){var a=e%8,s=8-a;return Math.abs(e-t)%8===0||t>=e-a&&t<e+s}}]),a}(g),y=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e,"http://t3.gstatic.com/images?q=tbn:ANd9GcReN9KWqKEGl0uRkdBWgcl-LaLK_8ecIzuBAhVBx9H82E40amLbEMYrZTc5fsgf4jxEpbAJaaV5znMbXHevmM0")}return a}((function e(t,a){Object(o.a)(this,e),this.image={backgroundImage:"url("+a+")"},this.player=t}));function P(){for(var e="----------- -RKBQ-XBKR- -PPPP-PPPP- --##------- --#----#--- ----------- -#---##---# -pppp-pppp- -rkbq-xbkr- -----------".split(" "),t=new Array(e.length),a=0;a<t.length;a++){var s=new Array(e[a]).fill(null);t[a]=s;for(var c=e[a].split(""),n=0;n<c.length;n++){switch(c[n]){case"#":t[a][n]=new y(2);break;case"r":t[a][n]=new w(-1);break;case"R":t[a][n]=new w(1);break;case"b":t[a][n]=new j(-1);break;case"B":t[a][n]=new j(1);break;case"k":t[a][n]=new m(-1);break;case"K":t[a][n]=new m(1);break;case"q":t[a][n]=new O(-1);break;case"Q":t[a][n]=new O(1);break;case"x":t[a][n]=new v(-1);break;case"X":t[a][n]=new v(1);break;case"p":t[a][n]=new f(-1);break;case"P":t[a][n]=new f(1);break;default:t[a][n]=null}}}return console.log(t),t}var x=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={squares:P(),whiteFallenSoldiers:[],blackFallenSoldiers:[],player:1,attackingPiece:-1,defendingPiece:-1,PHASE:"PICKING",status:"",turn:"white",gameOver:!1},e}return Object(l.a)(a,[{key:"handleClick",value:function(e){var t=!1,a=e[0],s=e[1];console.log("Click");var c=this.state.squares;if("PICKING"===this.state.PHASE)c[a][s]&&c[a][s].player===this.state.player?this.setState({status:"Select Destination",attackingPiece:e,PHASE:"ATTACKING"}):this.setState({status:"Wrong Selection, pick your own piece"});else if(c[this.state.attackingPiece[0]][this.state.attackingPiece[1]].isMoveLegal(this.state.attackingPiece,e,c))if(null==c[a][s])console.log("Empty click"),c[a][s]=c[this.state.attackingPiece[0]][this.state.attackingPiece[1]],c[this.state.attackingPiece[0]][this.state.attackingPiece[1]]=null,this.setState({status:"Empty click",PHASE:"PICKING",player:-1*this.state.player,turn:"white"===this.state.turn?"black":"white"});else if(c[a][s].player&&c[a][s].player==-1*this.state.player){console.log("Enemy click");var n=c[a][s];console.log(n.constructor.name);var i=c[this.state.attackingPiece[0]][this.state.attackingPiece[1]];console.log("player:".concat(this.state.player,", hp: ").concat(n.hp,", atk: ").concat(i.atk)),n.hp-=i.atk,(!n.hp||n.hp<0)&&(console.log("AYYY PIECE FUCKIGN DFEAD YO "),"King"===n.constructor.name&&(console.log("GAME OVER MAN GAME OVER"),t=!0),c[a][s]=c[this.state.attackingPiece[0]][this.state.attackingPiece[1]],c[this.state.attackingPiece[0]][this.state.attackingPiece[1]]=null),console.log(t),t?(console.log("GAME OVER!!!"),this.setState({status:"Player ".concat(this.state.turn," wins")})):(console.log("NOT GAME OVER!!!"),this.setState({status:"Enemy attacked",PHASE:"PICKING",player:-1*this.state.player,turn:"white"===this.state.turn?"black":"white"}))}else c[a][s].player&&c[a][s].player==this.state.player?console.log("Invalid click: Self"):c[a][s].player&&2==c[a][s].player?console.log("Invalid click: Obstacle"):console.log("Unknown Click");else console.log("Your pawn cannot move there, choose another piece"),this.setState({status:"Your pawn cannot move there, choose another piece",PHASE:"PICKING"})}},{key:"render",value:function(){var e=this;return console.log("GAME UPDATE"),Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"game",children:[Object(s.jsx)("div",{className:"game-board",children:Object(s.jsx)(d,{squares:this.state.squares,onClick:function(t){return e.handleClick(t)}})}),Object(s.jsxs)("div",{className:"game-info",children:[Object(s.jsx)("h3",{children:"Turn"}),Object(s.jsx)("div",{id:"player-turn-box",style:{backgroundColor:this.state.turn}}),Object(s.jsx)("div",{className:"game-status",children:this.state.status}),Object(s.jsx)("div",{className:"fallen-soldier-block",children:Object(s.jsx)(k,{whiteFallenSoldiers:this.state.whiteFallenSoldiers,blackFallenSoldiers:this.state.blackFallenSoldiers})})]})]}),Object(s.jsx)("div",{className:"icons-attribution",children:Object(s.jsxs)("div",{children:[" ",Object(s.jsxs)("small",{children:[" Chess Icons And Favicon (extracted) By en:User:Cburnett [",Object(s.jsx)("a",{href:"http://www.gnu.org/copyleft/fdl.html",children:"GFDL"}),", ",Object(s.jsx)("a",{href:"http://creativecommons.org/licenses/by-sa/3.0/",children:"CC-BY-SA-3.0"}),", ",Object(s.jsx)("a",{href:"http://opensource.org/licenses/bsd-license.php",children:"BSD"})," or ",Object(s.jsx)("a",{href:"http://www.gnu.org/licenses/gpl.html",children:"GPL"}),"], ",Object(s.jsx)("a",{href:"https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces",children:"via Wikimedia Commons"})," "]})]})})]})}}]),a}(n.a.Component);r.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))},6:function(e,t,a){}},[[14,1,2]]]);
//# sourceMappingURL=main.f091d73c.chunk.js.map